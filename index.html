<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mexico City Travel Guide</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Oswald:wght@500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Lenis for Smooth Scrolling -->
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>
    
    <style>
        /* Theme Config - Matching the Dribbble Video Essence */
        :root {
            --primary-gradient: linear-gradient(135deg, #6366f1 0%, #a855f7 50%, #ec4899 100%);
            --surface-color: #ffffff;
            --bg-color: #f8fafc;
            --text-main: #0f172a;
            --text-muted: #64748b;
        }

        html, body { background-color: var(--bg-color); margin: 0; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; color: var(--text-main); }
        .headline { font-family: 'Plus Jakarta Sans', sans-serif; letter-spacing: -0.03em; }
        
        /* Navigation & Tabs */
        .nav-link-active { 
            background: var(--primary-gradient);
            color: white; 
            font-weight: 600; 
            box-shadow: 0 10px 25px -5px rgba(168, 85, 247, 0.4);
            border: none;
        }
        .nav-link-inactive { 
            background: white; 
            color: var(--text-muted); 
            border: 1px solid #e2e8f0; 
        }
        .nav-link-inactive:hover { 
            color: var(--text-main); 
            background: #f1f5f9; 
            transform: translateY(-1px);
        }

        /* Chart */
        .chart-container { position: relative; width: 100%; height: 250px; }

        /* Typography */
        .section-title { 
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
        }

        /* Components */
        .glass-panel { 
            background: rgba(255, 255, 255, 0.7); 
            backdrop-filter: blur(20px); 
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .panel { 
            background: white; 
            border: 1px solid #f1f5f9; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.02), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
        }
        
        .panel-soft { 
            background: #f8fafc; 
            border: 1px solid #e2e8f0; 
        }
        
        .panel-soft:hover {
            border-color: #cbd5e1;
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.05);
        }

        .accent-chip { 
            background: var(--primary-gradient); 
            color: white; 
            font-weight: 600; 
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.3);
        }

        .pill { 
            background: white; 
            border: 1px solid #e2e8f0; 
            color: var(--text-muted);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Animation Classes */
        .reveal {
            opacity: 0;
            transform: translateY(30px) scale(0.98);
            transition: all 1.0s cubic-bezier(0.2, 0.8, 0.2, 1);
            will-change: transform, opacity;
        }
        
        .reveal.active {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .hover-lift { transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .hover-lift:hover { transform: translateY(-4px); }

        /* Stagger Delays */
        .delay-100 { transition-delay: 100ms; }
        .delay-200 { transition-delay: 200ms; }
        .delay-300 { transition-delay: 300ms; }
        
        /* Gradient Text Helper */
        .text-gradient {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen flex items-center justify-center p-4 selection:bg-purple-100 selection:text-purple-900">

    <!-- Main Dashboard Container -->
    <div class="w-full max-w-7xl rounded-[40px] bg-white border border-slate-200 shadow-[0_25px_50px_-12px_rgba(0,0,0,0.08)] overflow-hidden flex flex-col lg:flex-row h-[92vh] lg:h-[calc(100vh-2rem)] relative">
        
        <!-- Decorative Background Blobs inside container -->
        <div class="absolute top-0 left-0 w-full h-64 bg-gradient-to-r from-indigo-50 via-purple-50 to-pink-50 opacity-60 z-0"></div>
        <div class="absolute -top-24 -right-24 w-96 h-96 bg-purple-200 rounded-full blur-3xl opacity-20 pointer-events-none z-0"></div>
        <div class="absolute top-48 -left-24 w-72 h-72 bg-blue-200 rounded-full blur-3xl opacity-20 pointer-events-none z-0"></div>

        <!-- Sidebar -->
        <aside class="w-full lg:w-24 bg-white/80 backdrop-blur-md border-b lg:border-b-0 lg:border-r border-slate-100 shrink-0 z-20 flex flex-col items-center py-6 shadow-sm">
            <div class="flex lg:flex-col items-center justify-between lg:justify-start gap-8 w-full px-6 lg:px-0 h-full">
                <!-- Logo -->
                <div class="flex items-center gap-3 lg:flex-col">
                    <div class="h-12 w-12 rounded-2xl bg-slate-900 text-white flex items-center justify-center text-xl font-bold shadow-xl shadow-slate-200">CD</div>
                </div>
                
                <!-- Icons -->
                <div class="flex lg:flex-col items-center gap-6 lg:mt-8">
                    <button class="group relative h-12 w-12 rounded-2xl bg-white border border-slate-100 flex items-center justify-center text-slate-400 hover:text-purple-600 hover:shadow-lg hover:shadow-purple-100 hover:border-purple-100 transition-all duration-300">
                        <span class="transform group-hover:scale-110 transition-transform">‚ù§Ô∏è</span>
                    </button>
                    <button class="group relative h-12 w-12 rounded-2xl bg-white border border-slate-100 flex items-center justify-center text-slate-400 hover:text-blue-600 hover:shadow-lg hover:shadow-blue-100 hover:border-blue-100 transition-all duration-300">
                        <span class="transform group-hover:scale-110 transition-transform">üó∫Ô∏è</span>
                    </button>
                    <button class="group relative h-12 w-12 rounded-2xl bg-white border border-slate-100 flex items-center justify-center text-slate-400 hover:text-pink-600 hover:shadow-lg hover:shadow-pink-100 hover:border-pink-100 transition-all duration-300">
                        <span class="transform group-hover:scale-110 transition-transform">üéüÔ∏è</span>
                    </button>
                </div>

                <!-- Add Button -->
                <div class="lg:mt-auto">
                    <button class="h-14 w-14 rounded-full accent-chip text-2xl shadow-lg hover:shadow-purple-400/50 hover:scale-105 active:scale-95 flex items-center justify-center transition-all duration-300">+</button>
                </div>
            </div>
        </aside>

        <!-- Main Content Wrapper for Lenis -->
        <!-- Fixed: Removed 'scroll-smooth' class to prevent conflict with Lenis JS -->
        <div id="scrollWrapper" class="flex-1 overflow-y-auto relative z-10">
            <!-- Content Inner for Lenis Target -->
            <div id="scrollContent" class="px-6 py-8 sm:px-10 lg:px-12 lg:py-10">
                
                <!-- Header Area -->
                <header class="flex flex-col gap-8 lg:flex-row lg:items-end lg:justify-between mb-12 reveal delay-100 relative">
                    <div class="relative z-10">
                        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white border border-purple-100 shadow-sm mb-4">
                            <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                            <span class="text-xs font-semibold text-slate-600 tracking-wide uppercase">Live Guide ‚Ä¢ 2026</span>
                        </div>
                        <h1 class="headline text-5xl sm:text-6xl font-extrabold text-slate-900 leading-tight">
                            Explore <br>
                            <span class="text-gradient">Mexico City.</span>
                        </h1>
                        <p class="text-slate-500 mt-4 text-lg max-w-xl font-medium">Your curated dashboard for dining, culture, and hidden gems in CDMX.</p>
                    </div>
                    
                    <!-- Status Cards -->
                    <div class="flex gap-4">
                        <div class="panel p-4 rounded-2xl flex items-center gap-3 w-40 hover-lift cursor-pointer">
                            <div class="h-10 w-10 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center text-xl">‚òÄÔ∏è</div>
                            <div>
                                <p class="text-xs text-slate-400 font-semibold uppercase">Weather</p>
                                <p class="text-slate-800 font-bold">24¬∞ Sunny</p>
                            </div>
                        </div>
                        <div class="panel p-4 rounded-2xl flex items-center gap-3 w-40 hover-lift cursor-pointer">
                            <div class="h-10 w-10 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center text-xl">üöÄ</div>
                            <div>
                                <p class="text-xs text-slate-400 font-semibold uppercase">Mood</p>
                                <p class="text-slate-800 font-bold">Electric</p>
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Navigation Tabs -->
                <nav id="mainNav" class="flex flex-wrap gap-4 mb-10 reveal delay-200 pb-2">
                    <button data-target="home" class="nav-link px-6 py-3 rounded-full text-sm transition-all nav-link-active hover-lift">Dashboard</button>
                    <button data-target="eat" class="nav-link px-6 py-3 rounded-full text-sm transition-all nav-link-inactive">Dining</button>
                    <button data-target="seeDo" class="nav-link px-6 py-3 rounded-full text-sm transition-all nav-link-inactive">Culture</button>
                    <button data-target="stay" class="nav-link px-6 py-3 rounded-full text-sm transition-all nav-link-inactive">Stays</button>
                    <button data-target="tips" class="nav-link px-6 py-3 rounded-full text-sm transition-all nav-link-inactive">Tips</button>
                </nav>

                <!-- Dynamic Content Area -->
                <main id="contentArea" class="pb-16 min-h-[500px]">
                    
                    <!-- HOME SECTION -->
                    <section id="home" class="content-section space-y-8">
                        <div class="grid gap-8 lg:grid-cols-[1.5fr_1fr]">
                            <!-- Stats & Intro -->
                            <div class="panel rounded-[32px] p-8 reveal delay-200 relative overflow-hidden group">
                                <div class="absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-purple-100 to-transparent rounded-full -mr-16 -mt-16 opacity-50 group-hover:scale-110 transition-transform duration-700"></div>
                                
                                <h2 class="text-2xl font-bold text-slate-900 mb-4 relative z-10">Your Trip Overview</h2>
                                <p class="text-slate-500 text-base leading-relaxed mb-8 max-w-md relative z-10">
                                    We've curated the absolute best spots based on your preferences. Start exploring the categories to build your itinerary.
                                </p>
                                
                                <div class="grid grid-cols-3 gap-4 relative z-10">
                                    <div class="panel-soft rounded-2xl p-5 text-center transition-all duration-300 hover:bg-white hover:shadow-lg hover:-translate-y-1">
                                        <p class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-cyan-500 mb-1" id="totalCount">0</p>
                                        <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">Total Spots</p>
                                    </div>
                                    <div class="panel-soft rounded-2xl p-5 text-center transition-all duration-300 hover:bg-white hover:shadow-lg hover:-translate-y-1">
                                        <p class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-amber-500 mb-1" id="foodCount">0</p>
                                        <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">Eateries</p>
                                    </div>
                                    <div class="panel-soft rounded-2xl p-5 text-center transition-all duration-300 hover:bg-white hover:shadow-lg hover:-translate-y-1">
                                        <p class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-500 mb-1" id="cultureCount">0</p>
                                        <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">Sights</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Quick Chart -->
                            <div class="panel rounded-[32px] p-8 flex flex-col justify-center reveal delay-300 bg-slate-900 text-white relative overflow-hidden">
                                <!-- Dark card for contrast like in video -->
                                <div class="absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
                                <div class="absolute bottom-0 right-0 w-48 h-48 bg-purple-600 rounded-full blur-[80px] opacity-40"></div>
                                
                                <div class="flex items-center justify-between mb-4 relative z-10">
                                    <h3 class="text-lg font-semibold">Mix & Match</h3>
                                    <span class="text-[10px] text-white bg-white/20 px-3 py-1 rounded-full backdrop-blur-sm">Real-time</span>
                                </div>
                                <div class="chart-container flex items-center justify-center relative z-10">
                                    <canvas id="recommendationsChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Trip Blueprint -->
                        <div class="panel rounded-[32px] p-8 sm:p-10 reveal border-t-4 border-t-purple-500">
                            <h3 class="text-xl font-bold text-slate-900 mb-8">Perfect Day Blueprint</h3>
                            <div class="grid sm:grid-cols-3 gap-8 relative">
                                <!-- Connecting Line -->
                                <div class="hidden sm:block absolute top-6 left-0 w-full h-1 bg-gradient-to-r from-purple-100 via-pink-100 to-purple-100 rounded-full z-0"></div>

                                <!-- Step 1 -->
                                <div class="relative z-10 group hover-lift">
                                    <div class="w-12 h-12 rounded-2xl bg-white border-2 border-purple-100 shadow-lg flex items-center justify-center text-lg font-bold mb-5 group-hover:border-purple-500 transition-colors">‚òïÔ∏è</div>
                                    <h4 class="text-slate-900 font-bold text-lg mb-2">Morning</h4>
                                    <p class="text-sm text-slate-500 leading-relaxed font-medium">Coffee at <span class="text-purple-600">Panader√≠a Rosetta</span> followed by a walk through Plaza Rio de Janeiro.</p>
                                </div>
                                
                                <!-- Step 2 -->
                                <div class="relative z-10 group hover-lift">
                                    <div class="w-12 h-12 rounded-2xl bg-white border-2 border-pink-100 shadow-lg flex items-center justify-center text-lg font-bold mb-5 group-hover:border-pink-500 transition-colors">üé®</div>
                                    <h4 class="text-slate-900 font-bold text-lg mb-2">Afternoon</h4>
                                    <p class="text-sm text-slate-500 leading-relaxed font-medium">Visit <span class="text-pink-600">Frida Kahlo Museum</span> (book weeks ahead!) and explore the vibrant market.</p>
                                </div>

                                <!-- Step 3 -->
                                <div class="relative z-10 group hover-lift">
                                    <div class="w-12 h-12 rounded-2xl bg-white border-2 border-blue-100 shadow-lg flex items-center justify-center text-lg font-bold mb-5 group-hover:border-blue-500 transition-colors">üåÆ</div>
                                    <h4 class="text-slate-900 font-bold text-lg mb-2">Evening</h4>
                                    <p class="text-sm text-slate-500 leading-relaxed font-medium">Dinner at <span class="text-blue-600">Pujol</span> or Quintonil, followed by cocktails at a hidden speakeasy.</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- EAT SECTION -->
                    <section id="eat" class="content-section hidden space-y-8">
                        <div class="panel rounded-[32px] p-8 reveal min-h-[60vh]">
                            <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-6 mb-8">
                                <div>
                                    <h2 class="text-3xl font-bold text-slate-900">Culinary Delights</h2>
                                    <p class="text-slate-500 font-medium mt-2">From street tacos to Michelin stars.</p>
                                </div>
                                <div id="eatSubNav" class="flex flex-wrap gap-2">
                                    <button data-subtarget="all" class="subnav-link accent-chip px-5 py-2 rounded-full text-sm hover:shadow-lg transition-all transform hover:-translate-y-0.5">All</button>
                                    <button data-subtarget="Breakfast & Coffee" class="subnav-link pill px-5 py-2 rounded-full text-sm hover:bg-slate-50 hover:text-slate-900 transition-all">Coffee & Brunch</button>
                                    <button data-subtarget="Tacos & Street Food" class="subnav-link pill px-5 py-2 rounded-full text-sm hover:bg-slate-50 hover:text-slate-900 transition-all">Tacos</button>
                                    <button data-subtarget="Refined Dining" class="subnav-link pill px-5 py-2 rounded-full text-sm hover:bg-slate-50 hover:text-slate-900 transition-all">Fine Dining</button>
                                </div>
                            </div>
                            <div id="eatContent" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <!-- JS Injected Content -->
                            </div>
                        </div>
                    </section>

                    <!-- SEE & DO SECTION -->
                    <section id="seeDo" class="content-section hidden space-y-8">
                        <div class="panel rounded-[32px] p-8 reveal min-h-[60vh]">
                            <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-6 mb-8">
                                <div>
                                    <h2 class="text-3xl font-bold text-slate-900">Culture & Sights</h2>
                                    <p class="text-slate-500 font-medium mt-2">Museums, parks, and ancient history.</p>
                                </div>
                                <div id="seeDoSubNav" class="flex flex-wrap gap-2">
                                    <button data-subtarget="all" class="subnav-link accent-chip px-5 py-2 rounded-full text-sm hover:shadow-lg transition-all transform hover:-translate-y-0.5">All</button>
                                    <button data-subtarget="Art, History & Architecture" class="subnav-link pill px-5 py-2 rounded-full text-sm hover:bg-slate-50 hover:text-slate-900 transition-all">History</button>
                                    <button data-subtarget="Parks & Urban Escapes" class="subnav-link pill px-5 py-2 rounded-full text-sm hover:bg-slate-50 hover:text-slate-900 transition-all">Parks</button>
                                    <button data-subtarget="Unforgettable Adventures" class="subnav-link pill px-5 py-2 rounded-full text-sm hover:bg-slate-50 hover:text-slate-900 transition-all">Adventure</button>
                                </div>
                            </div>
                            <div id="seeDoContent" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <!-- JS Injected Content -->
                            </div>
                        </div>
                    </section>

                    <!-- STAY SECTION -->
                    <section id="stay" class="content-section hidden space-y-8">
                        <div class="panel rounded-[32px] p-8 reveal min-h-[60vh]">
                            <h2 class="text-3xl font-bold text-slate-900 mb-2">Accommodation</h2>
                            <p class="text-slate-500 font-medium mb-8">Curated stays in the best neighborhoods.</p>
                            <div id="stayContent" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6">
                                <!-- JS Injected Content -->
                            </div>
                        </div>
                    </section>

                    <!-- TIPS SECTION -->
                    <section id="tips" class="content-section hidden space-y-8">
                        <div class="panel rounded-[32px] p-8 reveal min-h-[60vh]">
                            <h2 class="text-3xl font-bold text-slate-900 mb-8">Travel Tips</h2>
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="panel-soft p-6 rounded-2xl border-l-4 border-green-500 bg-green-50/50 reveal delay-100 hover-lift">
                                    <h3 class="font-bold text-slate-800 mb-2 flex items-center gap-2">üí∞ Cash & Currency</h3>
                                    <p class="text-sm text-slate-600 leading-relaxed font-medium">Keep small denominations of pesos (20s, 50s) for street food vendors and tipping. Not everyone accepts cards.</p>
                                </div>
                                <div class="panel-soft p-6 rounded-2xl border-l-4 border-blue-500 bg-blue-50/50 reveal delay-200 hover-lift">
                                    <h3 class="font-bold text-slate-800 mb-2 flex items-center gap-2">üìÖ Reservations</h3>
                                    <p class="text-sm text-slate-600 leading-relaxed font-medium">For top spots like Pujol or Casa Azul, book 1-2 months in advance. They sell out incredibly fast.</p>
                                </div>
                                <div class="panel-soft p-6 rounded-2xl border-l-4 border-orange-500 bg-orange-50/50 reveal delay-300 hover-lift">
                                    <h3 class="font-bold text-slate-800 mb-2 flex items-center gap-2">üöó Getting Around</h3>
                                    <p class="text-sm text-slate-600 leading-relaxed font-medium">Uber is safe and affordable. Avoid hailing street taxis. The Metro is efficient but very crowded during rush hour.</p>
                                </div>
                                <div class="panel-soft p-6 rounded-2xl border-l-4 border-purple-500 bg-purple-50/50 reveal delay-300 hover-lift">
                                    <h3 class="font-bold text-slate-800 mb-2 flex items-center gap-2">üíß Water Safety</h3>
                                    <p class="text-sm text-slate-600 leading-relaxed font-medium">Do not drink tap water. Use bottled or filtered water for drinking and brushing your teeth to avoid illness.</p>
                                </div>
                            </div>
                        </div>
                    </section>

                </main>

                <!-- Footer -->
                <footer class="text-center pt-8 border-t border-slate-100 text-slate-400 text-sm font-medium">
                    <p>&copy; <span id="currentYear"></span> Mexico City Travel Guide. Designed with ‚ù§Ô∏è.</p>
                </footer>
            </div>
        </div>
    </div>

    <script>
        // Data Source
        const recommendations = [
            // Stay
            {
                id: 'dib-experience', name: 'DIB the Experience', category: 'Stay', subCategory: 'Boutique',
                description: 'A "beautiful" three-story loft apartment, noted for its affordability. Offers free WiFi, private parking.',
                address: '148 M√©rida, Mexico City', website: null, sourceQuote: 'Affordable three-story loft.', michelin: false
            },
            {
                id: 'hotel-san-fernando', name: 'Hotel San Fernando', category: 'Stay', subCategory: 'Boutique',
                description: 'A boutique hotel in the heart of Condesa. Features "super cute" rooms and an "adorable rooftop."',
                address: 'Iztaccihuatl 54, Condesa', website: null, sourceQuote: 'Adorable rooftop vibe.', michelin: true
            },
            // Eat
            {
                id: 'forte', name: 'Forte', category: 'Eat', subCategory: 'Breakfast & Coffee',
                description: 'Praised as a "beautiful coffee shop and bakery" known for its "fantastic homemade bread."',
                address: 'C. Quer√©taro 116, Roma Norte', website: null, sourceQuote: 'Fantastic homemade bread.', michelin: false
            },
            {
                id: 'quentin', name: 'Quentin', category: 'Eat', subCategory: 'Breakfast & Coffee',
                description: 'Situated on a tree-lined street, Quentin is a "perfect spot to meet friends" with really great coffee.',
                address: 'Av. √Ålvaro Obreg√≥n 64, Roma Nte.', website: null, sourceQuote: 'Quintessential coffee hub.', michelin: false
            },
            {
                id: 'taqueria-orinoco', name: 'Taquer√≠a Orinoco', category: 'Eat', subCategory: 'Tacos & Street Food',
                description: 'Famous for its Chicharron tacos. A hip spot that blends fast food vibes with high-quality traditional tastes.',
                address: 'Av. Insurgentes Sur 253', website: null, sourceQuote: 'Best Chicharron tacos.', michelin: false
            },
            {
                id: 'pujol', name: 'Pujol', category: 'Eat', subCategory: 'Refined Dining',
                description: 'Enrique Olvera\'s masterpiece. Consistently ranked among the best in the world. Famous for its Mole Madre.',
                address: 'Tennyson 133, Polanco', website: 'https://pujol.com.mx/', sourceQuote: 'Culinary perfection.', michelin: true
            },
             {
                id: 'handshake', name: 'Handshake Speakeasy', category: 'Eat', subCategory: 'Refined Dining',
                description: 'Hidden behind a secret door, this bar offers world-class molecular cocktails in an Art Deco setting.',
                address: 'Amberes 65, Juarez', website: null, sourceQuote: 'Mind-blowing cocktails.', michelin: false
            },
            // See & Do
            {
                id: 'casa-azul', name: 'Frida Kahlo Museum', category: 'See & Do', subCategory: 'Art, History & Architecture',
                description: 'The Blue House where Frida lived and died. A deeply personal museum filled with her art and belongings.',
                address: 'Londres 247, Coyoac√°n', website: 'https://museofridakahlo.org.mx/', tickets: '#', sourceQuote: 'A must-visit for art lovers.', michelin: false
            },
            {
                id: 'chapultepec', name: 'Chapultepec Park', category: 'See & Do', subCategory: 'Parks & Urban Escapes',
                description: 'One of the largest city parks in the Western Hemisphere. Home to a castle, a zoo, and anthropology museum.',
                address: 'Miguel Hidalgo', website: null, sourceQuote: 'The lungs of the city.', michelin: false
            },
             {
                id: 'teotihuacan', name: 'Teotihuacan', category: 'See & Do', subCategory: 'Unforgettable Adventures',
                description: 'Ancient Mesoamerican city known for its vast Avenue of the Dead and Pyramid of the Sun. Take a balloon ride!',
                address: 'San Juan Teotihuac√°n', tickets: '#', sourceQuote: 'City of the Gods.', michelin: false
            }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            // Set Year
            document.getElementById('currentYear').textContent = new Date().getFullYear();

            // Stats Logic
            document.getElementById('totalCount').textContent = recommendations.length;
            document.getElementById('foodCount').textContent = recommendations.filter(r => r.category === 'Eat').length;
            document.getElementById('cultureCount').textContent = recommendations.filter(r => r.category === 'See & Do').length;

            // DOM Elements
            const mainNav = document.getElementById('mainNav');
            const contentSections = document.querySelectorAll('.content-section');
            
            // SubNavs
            const eatSubNav = document.getElementById('eatSubNav');
            const seeDoSubNav = document.getElementById('seeDoSubNav');
            
            // Content Containers
            const eatContent = document.getElementById('eatContent');
            const seeDoContent = document.getElementById('seeDoContent');
            const stayContent = document.getElementById('stayContent');

            // --- ANIMATION & SCROLL LOGIC ---

            // 1. Initialize Lenis
            const scrollWrapper = document.getElementById('scrollWrapper');
            const scrollContent = document.getElementById('scrollContent');

            const lenis = new Lenis({
                wrapper: scrollWrapper,
                content: scrollContent,
                duration: 0.8, // Reduced for snappier feel
                easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)), 
                direction: 'vertical',
                gestureDirection: 'vertical',
                smooth: true,
                mouseMultiplier: 1.5, // Increased for easier nav
                smoothTouch: false,
                touchMultiplier: 2,
            });

            function raf(time) {
                lenis.raf(time);
                requestAnimationFrame(raf);
            }
            requestAnimationFrame(raf);

            // 2. Reveal Animation Observer
            const observerOptions = {
                root: scrollWrapper,
                rootMargin: '0px',
                threshold: 0.1
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                    }
                });
            }, observerOptions);

            function observeElements() {
                const elements = document.querySelectorAll('.reveal:not(.active)');
                elements.forEach(el => observer.observe(el));
            }
            
            observeElements();

            // Render Function with Staggered Delays and New Aesthetics
            function displayContent(targetId, subTarget = 'all', contentArea, dataCategory) {
                const itemsToDisplay = recommendations.filter(item => {
                    if (item.category !== dataCategory) return false;
                    return subTarget === 'all' || item.subCategory === subTarget;
                });

                contentArea.innerHTML = itemsToDisplay.map((item, index) => {
                    const delayClass = `delay-${Math.min((index + 1) * 100, 500)}`;
                    
                    return `
                    <div class="reveal ${delayClass} panel-soft p-6 rounded-2xl flex flex-col justify-between hover:bg-white hover:shadow-xl hover:shadow-purple-500/5 transition-all duration-300 group border border-slate-100">
                        <div>
                            <div class="flex justify-between items-start mb-3">
                                <h3 class="text-lg font-bold text-slate-800 group-hover:text-purple-600 transition-colors">
                                    ${item.name}
                                </h3>
                                ${item.michelin ? '<span class="px-2 py-1 bg-yellow-100 text-yellow-700 rounded-md text-[10px] font-bold uppercase tracking-wide">Michelin</span>' : ''}
                            </div>
                            
                            ${item.subCategory ? `<p class="text-xs font-bold text-purple-500 uppercase tracking-widest mb-3">${item.subCategory}</p>` : ''}
                            
                            <p class="text-slate-600 mb-5 text-sm leading-relaxed font-medium line-clamp-3">${item.description}</p>
                            
                            ${item.address ? `<p class="text-xs text-slate-400 mb-4 flex items-center gap-1 font-semibold">üìç ${item.address}</p>` : ''}
                            
                            ${item.sourceQuote ? `<div class="bg-slate-50 p-3 rounded-xl mb-4 border border-slate-100"><p class="text-xs text-slate-500 italic">"${item.sourceQuote}"</p></div>` : ''}
                        </div>
                        
                        <div class="mt-2 flex gap-3">
                            ${item.website ? `<a href="${item.website}" target="_blank" class="text-xs bg-slate-100 hover:bg-purple-600 hover:text-white text-slate-700 font-bold px-4 py-2 rounded-full transition-all">Visit Website ‚Üó</a>` : ''}
                            ${item.tickets ? `<a href="${item.tickets}" target="_blank" class="text-xs bg-gradient-to-r from-pink-500 to-purple-600 text-white font-bold px-4 py-2 rounded-full transition-all shadow-lg shadow-purple-500/20 hover:shadow-purple-500/40">Get Tickets</a>` : ''}
                        </div>
                    </div>
                `}).join('');

                if (itemsToDisplay.length === 0) {
                    contentArea.innerHTML = `<p class="text-slate-400 col-span-full text-center py-10 italic font-medium">No spots found in this category yet.</p>`;
                }

                setTimeout(observeElements, 50);
            }

            // Tab Switching Logic
            mainNav.addEventListener('click', (e) => {
                if (e.target.tagName === 'BUTTON') {
                    const targetId = e.target.dataset.target;
                    
                    contentSections.forEach(section => section.classList.add('hidden'));
                    const targetSection = document.getElementById(targetId);
                    targetSection.classList.remove('hidden');

                    lenis.scrollTo(0, { immediate: true });

                    mainNav.querySelectorAll('button').forEach(btn => {
                        btn.classList.remove('nav-link-active');
                        btn.classList.add('nav-link-inactive');
                    });
                    e.target.classList.add('nav-link-active');
                    e.target.classList.remove('nav-link-inactive');

                    if (targetId === 'eat') displayContent('eat', 'all', eatContent, 'Eat');
                    if (targetId === 'seeDo') displayContent('seeDo', 'all', seeDoContent, 'See & Do');
                    if (targetId === 'stay') displayContent('stay', 'all', stayContent, 'Stay');
                    
                    if (targetId === 'home' || targetId === 'tips') {
                         targetSection.querySelectorAll('.reveal').forEach(el => {
                             el.classList.remove('active');
                         });
                         setTimeout(observeElements, 50);
                    }
                }
            });

            // Sub-Nav Logic
            function setupSubNav(navElement, contentElement, categoryName) {
                if(!navElement) return;
                navElement.addEventListener('click', (e) => {
                    if (e.target.tagName === 'BUTTON') {
                        navElement.querySelectorAll('button').forEach(btn => {
                            btn.classList.remove('accent-chip');
                            btn.classList.add('pill');
                        });
                        e.target.classList.remove('pill');
                        e.target.classList.add('accent-chip');
                        displayContent(null, e.target.dataset.subtarget, contentElement, categoryName);
                    }
                });
            }

            setupSubNav(eatSubNav, eatContent, 'Eat');
            setupSubNav(seeDoSubNav, seeDoContent, 'See & Do');

            // Initialize Charts with Video Colors
            const ctx = document.getElementById('recommendationsChart').getContext('2d');
            const categories = ['Eat', 'See & Do', 'Stay'];
            const counts = categories.map(cat => recommendations.filter(r => r.category === cat).length);

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: categories,
                    datasets: [{
                        data: counts,
                        backgroundColor: [
                            '#f97316', // Orange
                            '#8b5cf6', // Purple
                            '#3b82f6'  // Blue
                        ],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false // Cleaner look like video
                        }
                    },
                    cutout: '85%'
                }
            });
        });
    </script>
</body>
</html>
